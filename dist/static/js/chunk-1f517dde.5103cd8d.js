(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f517dde"],{6283:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("home-advertise-detail",{attrs:{isEdit:!0}})},a=[],s=i("7e81"),n={name:"updateHomeAdvertise",title:"编辑广告",components:{HomeAdvertiseDetail:s["a"]}},o=n,l=i("2877"),d=Object(l["a"])(o,r,a,!1,null,null,null);t["default"]=d.exports},"64c4":function(e,t,i){"use strict";var r=i("9839"),a=i.n(r);a.a},"6edd":function(e,t,i){},"7e81":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[i("el-form",{ref:"form",attrs:{model:e.homeAdvertise,rules:e.rules,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"广告名称：",prop:"name"}},[i("el-input",{staticClass:"input-width",model:{value:e.homeAdvertise.name,callback:function(t){e.$set(e.homeAdvertise,"name",t)},expression:"homeAdvertise.name"}})],1),i("el-form-item",{attrs:{label:"广告位置："}},[i("el-select",{model:{value:e.homeAdvertise.spaceId,callback:function(t){e.$set(e.homeAdvertise,"spaceId",t)},expression:"homeAdvertise.spaceId"}},e._l(e.typeOptions,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"开始时间：",prop:"startTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期"},model:{value:e.homeAdvertise.startTime,callback:function(t){e.$set(e.homeAdvertise,"startTime",t)},expression:"homeAdvertise.startTime"}})],1),i("el-form-item",{attrs:{label:"到期时间：",prop:"endTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期"},model:{value:e.homeAdvertise.endTime,callback:function(t){e.$set(e.homeAdvertise,"endTime",t)},expression:"homeAdvertise.endTime"}})],1),i("el-form-item",{attrs:{label:"上线/下线："}},[i("el-radio-group",{model:{value:e.homeAdvertise.status,callback:function(t){e.$set(e.homeAdvertise,"status",t)},expression:"homeAdvertise.status"}},[i("el-radio",{attrs:{label:0}},[e._v("下线")]),i("el-radio",{attrs:{label:1}},[e._v("上线")])],1)],1),i("el-form-item",{attrs:{label:"广告图片："}},[i("upload-image",{ref:"courseCoverRef",attrs:{content:e.homeAdvertise.img&&[e.homeAdvertise.img],"get-urls":e.getADImgUrl,uploadUrl:"/PromotionAd/PromotionAdUpload",max:"10M",tipInfo:"建议尺寸：230*300px，JPG、PNG格式，图片小于150K"}})],1),i("el-form-item",{attrs:{label:"广告链接：",prop:"link"}},[i("el-input",{staticClass:"input-width",model:{value:e.homeAdvertise.link,callback:function(t){e.$set(e.homeAdvertise,"link",t)},expression:"homeAdvertise.link"}})],1),i("el-form-item",{attrs:{label:"广告备注："}},[i("el-input",{staticClass:"input-width",attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.homeAdvertise.text,callback:function(t){e.$set(e.homeAdvertise,"text",t)},expression:"homeAdvertise.text"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSave()}}},[e._v("提交")])],1)],1)],1)},a=[],s=(i("d81d"),i("b0c0"),i("db69")),n=i("ed08"),o={id:void 0,name:null,spaceId:"",img:null,startTime:null,endTime:null,status:0,link:null,text:null,sort:0},l={name:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入广告链接",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endTime:[{required:!0,message:"请选择到期时间",trigger:"blur"}],img:[{required:!0,message:"请选择广告图片",trigger:"blur"}]},d={name:"HomeAdvertiseDetail",components:{UploadImage:s["a"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{homeAdvertise:o,typeOptions:[],rules:l}},created:function(){if(this.isEdit){var e=this.$route.query.id;this.loadPromotion(e)}else this.homeAdvertise={};this.loadPromotionSpace()},methods:{loadPromotionSpace:function(){var e=this;return n["b"].get("/PromotionSpace/findAllPromotionSpace").then((function(t){e.typeOptions=t.data.content.map((function(e){return{label:e.name,value:e.id}}))}))},handleSave:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;n["b"].post("/PromotionAd/saveOrUpdatePromotionAd",e.homeAdvertise).then((function(t){e.$router.back()})).catch((function(e){}))}))},loadPromotion:function(e){var t=this;return n["b"].get("/PromotionAd/findPromotionAdById?id="+e).then((function(i){Object.assign(t.homeAdvertise,i.data.content),t.homeAdvertise.id=e})).catch((function(e){}))},getADImgUrl:function(e){e.length>0&&(this.homeAdvertise.img=e&&e[0].filePath)}}},m=d,c=(i("c7b8"),i("2877")),u=Object(c["a"])(m,r,a,!1,null,"759fb672",null);t["a"]=u.exports},9839:function(e,t,i){},c7b8:function(e,t,i){"use strict";var r=i("6edd"),a=i.n(r);a.a},c975:function(e,t,i){"use strict";var r=i("23e7"),a=i("4d64").indexOf,s=i("a640"),n=i("ae40"),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,d=s("indexOf"),m=n("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:l||!d||!m},{indexOf:function(e){return l?o.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})},db69:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image-div"},[i("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadAction,multiple:!1,limit:1,"before-upload":e.beforeUpload,"on-success":e.uploadSuccess,"on-remove":e.removeSuccess,"on-exceed":e.exceedFile,"file-list":e.fileList,"list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e.tipInfo?i("el-tag",{attrs:{type:"info"}},[e._v(e._s(e.tipInfo))]):e._e()],1)},a=[],s=(i("c975"),i("ac1f"),i("5319"),{name:"UploadImage",data:function(){return{uploadAction:"http://192.168.52.100:8080/ssm-web"+this.uploadUrl,fileList:[],data:{}}},props:["content","getUrls","max","tipInfo","uploadUrl"],watch:{content:{handler:function(e,t){this.initImage(e)},deep:!0}},methods:{initImage:function(e){this.content&&this.content.length>0?this.fileList=[{name:"image",url:this.content}]:this.fileList=[]},beforeUpload:function(e){var t="image/jpeg"===e.type,i="image/png"===e.type;if(!t&&!i)return this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),!1;var r="".concat(this.max);if(r=r.toUpperCase(),r&&r.indexOf("K")>=0){var a=e.size/1024/1024<10;if(!a)return this.$message.error("上传图片大小不能超过 "+r+"!"),!1}else if(r&&r.indexOf("M")>=0){var s=e.size/1024/1024<parseInt(r.replace("M",""));if(!s)return this.$message.error("上传图片大小不能超过 "+r+"!"),!1}return!0},uploadSuccess:function(e,t){this.data=[e.content],this.returnUrlArr()},returnUrlArr:function(){console.log(this.data),this.getUrls(this.data)},removeSuccess:function(e){this.data=[],this.returnUrlArr()},exceedFile:function(){this.$message.error("每个板块只能上传一张图片！请先移除图片再上传")}}}),n=s,o=(i("64c4"),i("2877")),l=Object(o["a"])(n,r,a,!1,null,null,null);t["a"]=l.exports}}]);